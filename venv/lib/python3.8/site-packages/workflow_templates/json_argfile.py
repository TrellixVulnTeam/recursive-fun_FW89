import pkg_resources
import sys
import argparse
import json


def get_json(args):
    if '--json_config' in args:
        json_file = args[args.index('--json_config')+1]
        with open(json_file, 'r') as f:
            json_data = json.load(f)
    else:
        json_data = []
    return json_data

def merge_json_args(args, json_args):
    newargs = []
    for json_arg in json_args[0].items():
        if json_arg[0] not in args:
            newargs.extend(json_arg)
    newargs.extend(args)
    for json_arg in json_args[1].items():
        if json_arg[0] not in args:
            newargs.extend(json_arg)
    return newargs

def merge_arguments(sysargs, jsonargs):
    if '--json_config' in sysargs:
        merged_args = merge_json_args(sysargs, jsonargs)
        arg_index = merged_args.index('--json_config')
        del merged_args[arg_index:arg_index+2]
        return merged_args
    else:
        return sysargs